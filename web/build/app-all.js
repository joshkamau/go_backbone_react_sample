console.log("Creating doPost function..."),doPost=function(e,t,a){$.ajax({type:"POST",url:e,processData:!1,contentType:"application/json",data:JSON.stringify(t),success:a,dataType:"json"}).fail(function(e){console.log(e)})};var eventer={};_.extend(eventer,Backbone.Events);var Delete=React.createClass({displayName:"Delete",render:function(){return React.createElement("div",null,React.createElement("h1",null,"Are you sure you want to delete"),React.createElement("a",{href:"#/"},"Delete"))}}),Home=React.createClass({displayName:"Home",getInitialState:function(){return{addresses:[]}},loadAddresses:function(){var e=this;doPost("/api/address/loadAll",{},function(t){console.log(t.data),e.setState({addresses:t.data})})},componentDidMount:function(){var e=this;console.log("Mounting home component"),e.loadAddresses(),eventer.on("ADDRESS_DELETED",e.loadAddresses)},componentWillUnmount:function(){eventer.off(null,this.loadAddresses)},deleteAddress:function(e,t){console.log("Deleting address ",e);var a=e.id;doPost("/api/address/delete",{id:a},function(e){console.log("deleted...",e),e.success&&(console.log("EVENTER...",eventer),eventer.trigger("ADDRESS_DELETED",a))}),t.preventDefault()},render:function(){var e=this;if(e.state.addresses){console.log("addresses ::",e.state.addresses);var t=e.state.addresses.map(function(t){return React.createElement("tr",{key:t.id},React.createElement("td",null,t.id),React.createElement("td",null,t.firstname),React.createElement("td",null,t.lastname),React.createElement("td",null,t.mobile),React.createElement("td",null,t.email),React.createElement("td",null,React.createElement("a",{href:"#/view/"+t.id},"select"),"|",React.createElement("a",{href:"",onClick:e.deleteAddress.bind(null,t)},"delete")))})}return React.createElement("div",null,React.createElement("h1",null,"Addresses"),React.createElement("a",{href:"#/new",className:"pure-button pure-button-primary"},"New Address"),React.createElement("hr",null),React.createElement("table",{className:"pure-table"},React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null,"ID"),React.createElement("th",null,"First Name"),React.createElement("th",null,"Last Name"),React.createElement("th",null,"Mobile"),React.createElement("th",null,"Email"),React.createElement("th",null))),React.createElement("tbody",null,t)))}}),New=React.createClass({displayName:"New",getInitialState:function(){return{}},updateFirstname:function(e){var t=this.state;t.firstname=e.target.value,this.setState(t)},updateLastname:function(e){var t=this.state;t.lastname=e.target.value,this.setState(t)},updateMobile:function(e){var t=this.state;t.mobile=e.target.value,this.setState(t)},updateEmail:function(e){var t=this.state;t.email=e.target.value,this.setState(t)},saveAddress:function(){console.log(this.state);var e=this.state;doPost("/api/address/save",e,function(e){console.log("Successfully submitted",e);var t=e.data;appRouter.navigate("view/"+t,!0)})},cancelAddress:function(){this.replaceState({})},render:function(){var e=this;return React.createElement("div",null,React.createElement("h1",null,"New Address"),React.createElement("form",{className:"pure-form pure-form-aligned"},React.createElement("div",{className:"pure-control-group"},React.createElement("label",null,"First Name"),React.createElement("input",{type:"text",value:e.state.firstname,onChange:e.updateFirstname})),React.createElement("div",{className:"pure-control-group"},React.createElement("label",null,"Last Name"),React.createElement("input",{type:"text",value:e.state.lastname,onChange:e.updateLastname})),React.createElement("div",{className:"pure-control-group"},React.createElement("label",null,"Mobile"),React.createElement("input",{type:"text",value:e.state.mobile,onChange:e.updateMobile})),React.createElement("div",{className:"pure-control-group"},React.createElement("label",null,"Email"),React.createElement("input",{type:"text",value:e.state.email,onChange:e.updateEmail})),React.createElement("div",{className:"right"},React.createElement("button",{className:"pure-button pure-button-primary",onClick:e.saveAddress},"save"),React.createElement("button",{className:"pure-button pure-button-active",onClick:e.cancelAddress},"cancel"))))}}),ViewAddress=React.createClass({displayName:"ViewAddress",getInitialState:function(){return{address:{}}},componentDidMount:function(){console.log("PROPS ::",this.props);var e=this,t=parseInt(e.props.addressID)||0;doPost("/api/address/loadByID",{id:t},function(t){console.log("data ",t.data),e.setState({address:t.data}),console.log("Address ",e.address)})},render:function(){var e=this;return React.createElement("div",null,React.createElement("h2",null,"Address"),React.createElement("form",{className:"pure-form pure-form-aligned"},React.createElement("div",{className:"pure-control-group"},React.createElement("label",null,"Firstname"),React.createElement("span",null,e.state.address.firstname)),React.createElement("div",{className:"pure-control-group"},React.createElement("label",null,"Lastname"),React.createElement("span",null,e.state.address.lastname)),React.createElement("div",{className:"pure-control-group"},React.createElement("label",null,"Mobile"),React.createElement("span",null,e.state.address.mobile)),React.createElement("div",{className:"pure-control-group"},React.createElement("label",null,"Email"),React.createElement("span",null,e.state.address.email))),React.createElement("a",{href:"#delete/"+e.props.addressID},"View List"))}}),AppRouter=Backbone.Router.extend({routes:{"":"home","new":"newAddress","view/:id":"viewAddress","delete/:id":"deleteAddress"},home:function(){console.log("Showing home...."),React.render(React.createElement(Home,null),document.getElementById("content"))},newAddress:function(){React.render(React.createElement(New,null),document.getElementById("content"))},viewAddress:function(e){console.log("Loading view address ",e),React.render(React.createElement(ViewAddress,{addressID:e}),document.getElementById("content"))},deleteAddress:function(e){var t=React.createElement(Home,{addressID:e});React.render(t,document.getElementById("content"))}}),appRouter=new AppRouter;Backbone.history.start();